<!DOCTYPE html>

<html>
<head>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCU6X7lKWFHxKdiMMEBKyVR3FOzw83D0kw"></script>
</head>
<body>
    
    @using (Html.BeginForm("Map", "Map", FormMethod.Post))
    {
        <table border="0" cellpadding="5" cellspacing="0">
            <tr>
                <td>Start Location</td>
                <td>@Html.TextBox("startLocation")</td>
            </tr>
            <!--          <tr>
                <td>End Location</td>
                <td>@Html.TextBox("endLocation")</td>
            </tr> -->
            <tr>
                <td></td>
                <td><input type="submit" value="Submit"/></td>
            </tr>
        </table>
    }

<div id="map" style="width:100%;height:400px;"></div>

    <script type="text/javascript">
        var directionsDisplay;
        var directionsService = new google.maps.DirectionsService();
        function InitializeMap() {
            // Set the Latitude and Longitude of the Map
            var myAddress = new google.maps.LatLng(39.9526, -75.1652);

            // Create Options or set different Characteristics of Google Map
            var mapOptions = {
                center: myAddress,
                zoom: 15,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            // Display the Google map in the div control with the defined Options
            var map = new google.maps.Map(document.getElementById("map"), mapOptions);
            // Set Marker on the Map
            var marker = new google.maps.Marker({
                position: myAddress
            });
            marker.setMap(map);
        }
       // window.onload = InitializeMap;
    </script>

    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places&key=AIzaSyCU6X7lKWFHxKdiMMEBKyVR3FOzw83D0kw"></script>
    <script type="text/javascript">
        google.maps.event.addDomListener(window, 'load', function () {
            var places = new google.maps.places.Autocomplete(document.getElementById('startLocation'));
            var endplace = new google.maps.places.Autocomplete(document.getElementById('endLocation'));
            google.maps.event.addListener(places, 'place_changed', function () {
                var place = places.getPlace();
                document.getElementById('startLocation').value = place.formatted_address;
                document.getElementById('endLocation').value = place.formatted_address;
            });
        });
    </script>
    @if (ViewBag.Message != null)
    {
        <script type="text/javascript">
            window.onload = function(){
                alert("@ViewBag.Message");
            };
        </script>
    }
</body>
</html>
